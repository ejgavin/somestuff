<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Some Stuff Music Player</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #0c1222;
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .blob-container {
            position: fixed;
            inset: 0;
            overflow: hidden;
            pointer-events: none;
            z-index: 0;
        }

        .blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(100px);
            opacity: 0.4;
            animation: float 25s infinite ease-in-out;
        }

        .blob-1 {
            width: 600px;
            height: 600px;
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #06b6d4 100%);
            top: -300px;
            left: -200px;
            animation-delay: 0s;
        }

        .blob-2 {
            width: 500px;
            height: 500px;
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 50%, #2563eb 100%);
            bottom: -200px;
            right: -150px;
            animation-delay: 8s;
        }

        .blob-3 {
            width: 700px;
            height: 700px;
            background: linear-gradient(135deg, #2563eb 0%, #06b6d4 50%, #3b82f6 100%);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation-delay: 16s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(120px, -120px) scale(1.1); }
            50% { transform: translate(-80px, 80px) scale(0.95); }
            75% { transform: translate(80px, 120px) scale(1.05); }
        }

        .content-wrapper {
            position: relative;
            z-index: 10;
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem 20px;
        }

        .header-section {
            text-align: center;
            margin-bottom: 3rem;
            padding-top: 2rem;
        }

        .main-title {
            font-size: 4rem;
            font-weight: 900;
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #06b6d4 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
            letter-spacing: -1px;
        }

        .subtitle {
            font-size: 1.25rem;
            color: #64748b;
        }

        .search-wrapper {
            max-width: 800px;
            margin: 0 auto 3rem;
        }

        .search-card {
            background: rgba(30, 42, 69, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 10px 25px rgba(37, 99, 235, 0.15);
        }

        .search-input-group {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .search-icon {
            color: #64748b;
            flex-shrink: 0;
            width: 20px;
            height: 20px;
        }

        .search-field {
            flex: 1;
            padding: 1rem 1.25rem;
            background: #0c1222;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: #ffffff;
            font-size: 1.1rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .search-field:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
        }

        .search-field::placeholder {
            color: #64748b;
        }

        .search-button {
            padding: 1rem 2rem;
            background: #2563eb;
            border: none;
            border-radius: 12px;
            color: #ffffff;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
        }

        .search-button:hover:not(:disabled) {
            background: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 20px 40px rgba(37, 99, 235, 0.25);
        }

        .search-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .results-section {
            max-width: 1200px;
            margin: 0 auto 3rem;
            display: none;
        }

        .results-section.active {
            display: block;
        }

        .section-title {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            color: #ffffff;
        }

        .results-grid {
            display: grid;
            gap: 1.5rem;
        }

        .song-card {
            background: rgba(30, 42, 69, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .song-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(37, 99, 235, 0.25);
            border-color: #2563eb;
        }

        .song-cover {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            flex-shrink: 0;
        }

        .song-details {
            flex: 1;
        }

        .song-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
            color: #ffffff;
        }

        .song-artist {
            color: #06b6d4;
            font-weight: 500;
            margin-bottom: 0.25rem;
        }

        .song-album {
            color: #64748b;
            font-size: 0.9rem;
        }

        .play-icon {
            color: #06b6d4;
            flex-shrink: 0;
            width: 24px;
            height: 24px;
        }

        .player-section {
            max-width: 1400px;
            margin: 0 auto;
            display: none;
        }

        .player-section.active {
            display: block;
        }

        .player-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .player-card, .lyrics-card {
            background: rgba(30, 42, 69, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 2.5rem;
            box-shadow: 0 10px 25px rgba(37, 99, 235, 0.15);
        }

        .player-content {
            text-align: center;
            margin-bottom: 2rem;
        }

        .album-art-wrapper {
            margin-bottom: 2rem;
        }

        .album-art {
            width: 320px;
            height: 320px;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(37, 99, 235, 0.25);
            animation: albumPulse 4s ease-in-out infinite;
        }

        @keyframes albumPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }

        .now-playing-title {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            color: #ffffff;
        }

        .now-playing-artist {
            font-size: 1.25rem;
            color: #06b6d4;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .now-playing-album {
            color: #64748b;
            font-size: 1rem;
        }

        .progress-section {
            margin-bottom: 2rem;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 999px;
            cursor: pointer;
            margin-bottom: 0.75rem;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #2563eb, #06b6d4);
            border-radius: 999px;
            transition: width 0.1s linear;
            width: 0%;
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            color: #64748b;
            font-size: 0.9rem;
        }

        .controls-section {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .control-btn {
            background: none;
            border: none;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 0.5rem;
        }

        .control-btn:hover {
            color: #06b6d4;
            transform: scale(1.1);
        }

        .control-btn svg {
            width: 28px;
            height: 28px;
        }

        .play-btn {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #2563eb 0%, #06b6d4 100%);
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 25px rgba(37, 99, 235, 0.3);
        }

        .play-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 20px 40px rgba(37, 99, 235, 0.4);
        }

        .play-btn svg {
            width: 32px;
            height: 32px;
        }

        .volume-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .volume-icon {
            color: #64748b;
            width: 24px;
            height: 24px;
        }

        .volume-slider {
            flex: 1;
            height: 6px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
            -webkit-appearance: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #2563eb;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(37, 99, 235, 0.4);
        }

        .volume-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #2563eb;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(37, 99, 235, 0.4);
        }

        .lyrics-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            color: #ffffff;
        }

        .lyrics-header svg {
            width: 24px;
            height: 24px;
        }

        .lyrics-container {
            height: 600px;
            overflow-y: auto;
            padding-right: 1rem;
            scroll-behavior: smooth;
        }

        .lyrics-container::-webkit-scrollbar {
            display: none;
        }

        .lyrics-container {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .lyric-line {
            font-size: 1.125rem;
            line-height: 2;
            color: #64748b;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 0.5rem 0;
        }

        .lyric-line.active-lyric {
            color: #ffffff;
            font-weight: 600;
            font-size: 1.25rem;
            transform: translateX(8px);
        }

        .no-lyrics {
            text-align: center;
            color: #64748b;
            padding: 3rem;
        }

        @media (max-width: 1024px) {
            .player-grid {
                grid-template-columns: 1fr;
            }
            .album-art {
                width: 280px;
                height: 280px;
            }
        }

        @media (max-width: 768px) {
            .main-title {
                font-size: 2.5rem;
            }
            .search-input-group {
                flex-direction: column;
            }
            .search-button {
                width: 100%;
            }
            .song-card {
                flex-direction: column;
                text-align: center;
            }
            .album-art {
                width: 240px;
                height: 240px;
            }
            .now-playing-title {
                font-size: 1.5rem;
            }
            .lyrics-container {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="blob-container">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <div class="content-wrapper">
        <div class="header-section">
            <h1 class="main-title">Some Stuff Music Player</h1>
            <p class="subtitle">Discover and enjoy your favorite music</p>
        </div>

        <div class="search-wrapper">
            <div class="search-card">
                <div class="search-input-group">
                    <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    <input type="text" id="searchInput" class="search-field" placeholder="Search for songs, artists, or albums...">
                    <button id="searchBtn" class="search-button">Search</button>
                </div>
            </div>
        </div>

        <div id="resultsSection" class="results-section">
            <h2 class="section-title">Search Results</h2>
            <div id="resultsGrid" class="results-grid"></div>
        </div>

        <div id="playerSection" class="player-section">
            <div class="player-grid">
                <div class="player-card">
                    <div class="player-content">
                        <div class="album-art-wrapper">
                            <img id="albumArt" class="album-art" src="" alt="Album Art">
                        </div>
                        <h2 id="songTitle" class="now-playing-title"></h2>
                        <p id="artistName" class="now-playing-artist"></p>
                        <p id="albumName" class="now-playing-album"></p>
                    </div>

                    <div class="progress-section">
                        <div id="progressBar" class="progress-bar">
                            <div id="progressFill" class="progress-fill"></div>
                        </div>
                        <div class="time-display">
                            <span id="currentTime">0:00</span>
                            <span id="duration">0:00</span>
                        </div>
                    </div>

                    <div class="controls-section">
                        <button class="control-btn" id="prevBtn">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.333 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"/>
                            </svg>
                        </button>
                        <button class="play-btn" id="playBtn">
                            <svg id="playIcon" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                            <svg id="pauseIcon" style="display:none;" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
                            </svg>
                        </button>
                        <button class="control-btn" id="nextBtn">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z"/>
                            </svg>
                        </button>
                    </div>

                    <div class="volume-section">
                        <svg class="volume-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"/>
                        </svg>
                        <input type="range" id="volumeSlider" class="volume-slider" min="0" max="1" step="0.01" value="1">
                    </div>
                </div>

                <div class="lyrics-card">
                    <h3 class="lyrics-header">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"/>
                        </svg>
                        Synced Lyrics
                    </h3>
                    <div id="lyricsContainer" class="lyrics-container">
                        <p class="no-lyrics">No lyrics available for this song</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <audio id="audioPlayer"></audio>

    <script>
        var searchInput = document.getElementById('searchInput');
        var searchBtn = document.getElementById('searchBtn');
        var resultsSection = document.getElementById('resultsSection');
        var resultsGrid = document.getElementById('resultsGrid');
        var playerSection = document.getElementById('playerSection');
        var audioPlayer = document.getElementById('audioPlayer');
        var playBtn = document.getElementById('playBtn');
        var playIcon = document.getElementById('playIcon');
        var pauseIcon = document.getElementById('pauseIcon');
        var progressBar = document.getElementById('progressBar');
        var progressFill = document.getElementById('progressFill');
        var currentTimeEl = document.getElementById('currentTime');
        var durationEl = document.getElementById('duration');
        var volumeSlider = document.getElementById('volumeSlider');
        var albumArt = document.getElementById('albumArt');
        var songTitle = document.getElementById('songTitle');
        var artistName = document.getElementById('artistName');
        var albumName = document.getElementById('albumName');
        var lyricsContainer = document.getElementById('lyricsContainer');

        var currentSong = null;
        var lyrics = [];
        var currentLyricIndex = -1;

        searchBtn.addEventListener('click', searchSongs);
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchSongs();
            }
        });

        function searchSongs() {
            var query = searchInput.value.trim();
            if (!query) return;

            searchBtn.textContent = 'Searching...';
            searchBtn.disabled = true;

            fetch('https://somestuffserver.koyeb.app/api/deezer?q=' + encodeURIComponent(query))
                .then(function(response) { return response.json(); })
                .then(function(data) {
                    console.log('API Response:', data);
                    displayResults(data);
                })
                .catch(function(error) {
                    console.error('Search error:', error);
                    resultsGrid.innerHTML = '<p style="color: #64748b; text-align: center; padding: 2rem;">An error occurred. Please try again.</p>';
                })
                .finally(function() {
                    searchBtn.textContent = 'Search';
                    searchBtn.disabled = false;
                });
        }

        function displayResults(data) {
            resultsGrid.innerHTML = '';
            resultsSection.classList.add('active');
            playerSection.classList.remove('active');

            var results = data;
            
            if (!results || !Array.isArray(results) || results.length === 0) {
                resultsGrid.innerHTML = '<p style="color: #64748b; text-align: center; padding: 2rem;">No results found. Try a different search.</p>';
                return;
            }

            results.forEach(function(song) {
                var card = document.createElement('div');
                card.className = 'song-card';
                card.innerHTML = '<img src="' + song.album.cover_medium + '" alt="' + song.album.title + '" class="song-cover"><div class="song-details"><h3 class="song-title">' + song.title + '</h3><p class="song-artist">' + song.artist.name + '</p><p class="song-album">' + song.album.title + '</p></div><svg class="play-icon" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>';
                card.addEventListener('click', function() {
                    playSong(song);
                });
                resultsGrid.appendChild(card);
            });
        }

        function playSong(song) {
            currentSong = song;
            searchBtn.textContent = 'Loading...';
            searchBtn.disabled = true;

            var musicUrl = 'https://somestuffserver.koyeb.app/api/deezermusic?q=' + encodeURIComponent(song.title + ' ' + song.artist.name) + '&raw=1';
            var lyricsUrl = 'https://lrclib.net/api/get?artist_name=' + encodeURIComponent(song.artist.name) + '&track_name=' + encodeURIComponent(song.title);

            Promise.all([fetch(musicUrl), fetch(lyricsUrl)])
                .then(function(responses) {
                    return Promise.all([responses[0].json(), responses[1].json()]);
                })
                .then(function(data) {
                    var musicData = data[0];
                    var lyricsData = data[1];

                    albumArt.src = song.album.cover_xl;
                    songTitle.textContent = song.title;
                    artistName.textContent = song.artist.name;
                    albumName.textContent = song.album.title;

                    lyrics = parseLyrics(lyricsData.syncedLyrics);
                    displayLyrics();

                    audioPlayer.src = musicData.mp3;
                    audioPlayer.play();
                    updatePlayButton(true);

                    resultsSection.classList.remove('active');
                    playerSection.classList.add('active');
                })
                .catch(function(error) {
                    console.error('Play error:', error);
                })
                .finally(function() {
                    searchBtn.textContent = 'Search';
                    searchBtn.disabled = false;
                });
        }

        function parseLyrics(syncedLyrics) {
            if (!syncedLyrics) return [];
            var lines = syncedLyrics.split('\n').filter(function(line) {
                return line.trim();
            });
            var parsed = [];
            for (var i = 0; i < lines.length; i++) {
                var match = lines[i].match(/\[(\d+):(\d+\.\d+)\]\s*(.*)/);
                if (match) {
                    var minutes = parseInt(match[1]);
                    var seconds = parseFloat(match[2]);
                    var time = minutes * 60 + seconds;
                    parsed.push({ time: time, text: match[3] });
                }
            }
            return parsed;
        }

        function displayLyrics() {
            if (lyrics.length === 0) {
                lyricsContainer.innerHTML = '<p class="no-lyrics">No lyrics available for this song</p>';
                return;
            }

            var html = '';
            for (var i = 0; i < lyrics.length; i++) {
                html += '<p class="lyric-line" data-index="' + i + '">' + lyrics[i].text + '</p>';
            }
            lyricsContainer.innerHTML = html;
        }

        playBtn.addEventListener('click', function() {
            if (audioPlayer.paused) {
                audioPlayer.play();
                updatePlayButton(true);
            } else {
                audioPlayer.pause();
                updatePlayButton(false);
            }
        });

        function updatePlayButton(isPlaying) {
            if (isPlaying) {
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
            } else {
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
            }
        }

        audioPlayer.addEventListener('timeupdate', function() {
            var currentTime = audioPlayer.currentTime;
            var duration = audioPlayer.duration;

            var progress = (currentTime / duration) * 100 || 0;
            progressFill.style.width = progress + '%';

            currentTimeEl.textContent = formatTime(currentTime);
            durationEl.textContent = formatTime(duration);

            updateActiveLyric(currentTime);
        });

        function updateActiveLyric(currentTime) {
            var newIndex = -1;
            for (var i = 0; i < lyrics.length; i++) {
                var nextLyric = lyrics[i + 1];
                if (currentTime >= lyrics[i].time && (!nextLyric || currentTime < nextLyric.time)) {
                    newIndex = i;
                    break;
                }
            }

            if (newIndex !== -1 && newIndex !== currentLyricIndex) {
                var previousActive = lyricsContainer.querySelector('.active-lyric');
                if (previousActive) {
                    previousActive.classList.remove('active-lyric');
                }

                var currentActive = lyricsContainer.querySelector('[data-index="' + newIndex + '"]');
                if (currentActive) {
                    currentActive.classList.add('active-lyric');
                    
                    var containerRect = lyricsContainer.getBoundingClientRect();
                    var activeRect = currentActive.getBoundingClientRect();
                    var offset = activeRect.top - containerRect.top - (containerRect.height / 2) + (activeRect.height / 2);
                    
                    lyricsContainer.scrollBy({
                        top: offset,
                        behavior: 'smooth'
                    });
                }

                currentLyricIndex = newIndex;
            }
        }

        progressBar.addEventListener('click', function(e) {
            var rect = progressBar.getBoundingClientRect();
            var clickPosition = e.clientX - rect.left;
            var progressBarWidth = rect.width;
            var newTime = (clickPosition / progressBarWidth) * audioPlayer.duration;
            audioPlayer.currentTime = newTime;
        });

        volumeSlider.addEventListener('input', function(e) {
            audioPlayer.volume = e.target.value;
        });

        function formatTime(time) {
            if (isNaN(time)) return '0:00';
            var minutes = Math.floor(time / 60);
            var seconds = Math.floor(time % 60);
            return minutes + ':' + (seconds < 10 ? '0' : '') + seconds;
        }
    </script>
</body>
</html>
